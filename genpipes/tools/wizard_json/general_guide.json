{
    "_meta": {
        "entry_point": "start_general_guide",
        "version": 1.0,
        "description": "General guide to determine if user needs selecting the appropriate deployment method, pipeline, protocol, and/or constructing the command to run GenPipes"
    },
    "nodes": [
        {
            "id": "start_general_guide",
            "type": "confirm", 
            "question": "Do you need help deploying GenPipes?",
            "options": [
                {
                    "label": "Yes",
                    "next": {
                        "external": "deployment_guide.json",
                        "entryPoint": "start_deployment_guide"
                    }
                },
                {
                    "label": "No",
                    "next": {
                        "node": "pipeline_help"
                    }
                }
            ]
        },
        {
            "id": "pipeline_help",
            "type": "confirm", 
            "question": "Do you need help finding the pipeline that fits your dataset and your analysis goals?",
            "options": [
                {
                    "label": "Yes",
                    "next": {
                        "external": "pipeline_guide.json",
                        "entryPoint": "start_pipeline_guide"
                    }
                },
                {
                    "label": "No",
                    "next": {
                        "node": "pipeline_selection"
                    }
                }
            ] 
        },
        {
            "id": "pipeline_selection",
            "type": "selection", 
            "question": "Select the pipeline you are using:",
            "variable": "pipeline_selection",
            "choices": [
              "ampliconseq",
              "chipseq", 
              "covseq", 
              "dnaseq", 
              "longread_dnaseq", 
              "methylseq", 
              "nanopore_covseq", 
              "rnaseq", 
              "rnaseq_denovo_assembly", 
              "rnaseq_light"
            ], 
            "next": {
              "node": "switch_pipeline"
            }
        },
        {
            "id": "switch_pipeline",
            "type": "switch",
            "variable": "pipeline_selection",
            "cases": {
              "ampliconseq": {
                "node": "command_help"
              },
              "chipseq": {
                "node": "protocol_help"
              },
              "covseq": {
                "node": "command_help"
              },
              "dnaseq": {
                "node": "protocol_help"
              },
              "longread_dnaseq": {
                "node": "protocol_help"
              },
              "methylseq": {
                "node": "protocol_help"
              },
              "nanopore_covseq": {
                "node": "command_help"
              },
              "rnaseq": {
                "node": "protocol_help"
              },
              "rnaseq_denovo_assembly": {
                "node": "protocol_help"
              },
              "rnaseq_light": {
                "node": "command_help"
              }
            }
        },
        {
            "id": "protocol_help",
            "type": "confirm",
            "question": "Do you need help choosing the protocol for your pipeline?",
            "options": [
                {
                    "label": "Yes",
                    "next": {
                        "external": "protocol_guide.json",
                        "entryPoint": "start_protocol_guide"
                    }
                },
                {
                    "label": "No",
                    "next": {
                        "node": "protocol_selection"
                    }
                }
            ]
        },
        {
            "id": "protocol_selection",
            "type": "selection",
            "question": "Select the protocol you are using:",
            "choices_cases": [
              {
                "when":    { "equals":  { "pipeline_selection": "chipseq" } },
                "choices": [ 
                    {"id": "chipseq_protocol_selected", "label": "chipseq"},
                    {"id": "atacseq_protocol_selected", "label": "atacseq"}
                ]
              },
              {
                "when":    { "equals":  { "pipeline_selection": "dnaseq" } },
                "choices": [
                    {"id": "germline_snv_protocol_selected", "label": "germline_snv"},
                    {"id": "germline_sv_protocol_selected", "label": "germline_sv"},
                    {"id": "germline_high_cov_protocol_selected", "label": "germline_high_cov"},
                    {"id": "somatic_tumor_only_protocol_selected", "label": "somatic_tumor_only"},
                    {"id": "somatic_fastpass_protocol_selected", "label": "somatic_fastpass"},
                    {"id": "somatic_ensemble_protocol_selected", "label": "somatic_ensemble"},
                    {"id": "somatic_sv_protocol_selected", "label": "somatic_sv"}
                ]
              },
              {
                "when":    { "equals":  { "pipeline_selection": "longread_dnaseq" } },
                "choices": [
                    {"id": "nanopore_protocol_selected", "label": "nanopore"},
                    {"id": "revio_protocol_selected", "label": "revio"}
                ]
              },
              {
                "when":    { "equals":  { "pipeline_selection": "methylseq" } },
                "choices": [ 
                    {"id": "bismark_protocol_selected", "label": "bismark"},
                    {"id": "gembs_protocol_selected", "label": "gembs"},
                    {"id": "dragen_protocol_selected", "label": "dragen"},
                    {"id": "hybrid_protocol_selected", "label": "hybrid"}
                 ]
              },
              {
                "when":    { "equals":  { "pipeline_selection": "rnaseq" } },
                "choices": [ 
                    {"id": "stringtie_protocol_selected", "label": "stringtie"},
                    {"id": "variants_protocol_selected", "label": "variants"},
                    {"id": "cancer_protocol_selected", "label": "cancer"}
                ]
              },
              {
                "when":    { "equals":  { "pipeline_selection": "rnaseq_denovo_assembly" } },
                "choices": [ 
                    {"id": "trinity_protocol_selected", "label": "trinity"},
                    {"id": "seq2fun_protocol_selected", "label": "seq2fun"}
                ]
              }
            ],
            "next": {
              "node": "command_help"
            }
        },        
        {
            "id": "command_help",
            "type": "confirm", 
            "question": "Do you need help writing the command to run your pipeline?",
            "options": [
                {
                    "label": "Yes",
                    "next": {
                        "external": "command_guide.json",
                        "entryPoint": "start_command_guide"
                    }
                },
                {
                    "label": "No",
                    "next": {
                        "node": "end"
                    }
                }
            ] 
        },
        {
            "id": "end",
            "type": "message",
            "message": "Thank you for using the GenPipes Wizard. Best of luck with your analysis! For additional support, run genpipes -h or consult the readthedocs."
          }
          
    ]
}